Version 4
SHEET 1 1108 680
WIRE -16 -1104 -672 -1104
WIRE 288 -1104 -16 -1104
WIRE -16 -1072 -16 -1104
WIRE -416 -1040 -512 -1040
WIRE -416 -1024 -416 -1040
WIRE -512 -1008 -512 -1040
WIRE -672 -976 -672 -1104
WIRE -16 -976 -16 -992
WIRE -512 -864 -512 -928
WIRE -672 -848 -672 -896
WIRE -560 -848 -672 -848
WIRE -400 -832 -480 -832
WIRE -560 -816 -576 -816
WIRE -672 -784 -672 -848
WIRE -576 -736 -576 -816
WIRE -400 -736 -400 -832
WIRE -400 -736 -576 -736
WIRE -512 -704 -512 -800
WIRE -672 -672 -672 -704
WIRE -512 -592 -512 -624
WIRE -400 -416 -400 -736
WIRE -400 -416 -544 -416
WIRE -768 -400 -832 -400
WIRE -336 -400 -336 -416
WIRE -832 -384 -832 -400
WIRE -544 -384 -544 -416
WIRE 288 -352 288 -1104
WIRE -336 -304 -336 -320
WIRE -704 -288 -832 -288
WIRE -544 -288 -544 -304
WIRE -544 -288 -624 -288
WIRE -544 -272 -544 -288
WIRE -592 -256 -640 -256
WIRE -768 -224 -768 -320
WIRE -816 -208 -1040 -208
WIRE -1040 -192 -1040 -208
WIRE -640 -192 -640 -256
WIRE -640 -192 -736 -192
WIRE -832 -176 -832 -288
WIRE -816 -176 -832 -176
WIRE 112 -128 -208 -128
WIRE 288 -128 288 -272
WIRE 608 -128 288 -128
WIRE 720 -128 608 -128
WIRE -1040 -96 -1040 -112
WIRE -768 -96 -768 -160
WIRE -208 -80 -208 -128
WIRE 608 -80 608 -128
WIRE -544 -64 -544 -176
WIRE 112 -16 112 -128
WIRE -768 0 -768 -16
WIRE 608 0 608 -16
WIRE 288 80 288 -128
WIRE 112 128 112 64
WIRE -544 144 -544 16
WIRE -400 144 -544 144
WIRE 64 144 -320 144
WIRE 240 160 144 160
WIRE 64 176 48 176
WIRE -544 208 -544 144
WIRE 48 208 48 176
WIRE 288 208 288 176
WIRE 288 208 48 208
WIRE 288 240 288 208
WIRE -544 336 -544 288
WIRE -208 336 -208 0
WIRE -208 336 -544 336
WIRE -16 336 -208 336
WIRE 112 336 112 192
WIRE 112 336 -16 336
WIRE 288 336 288 320
WIRE 288 336 112 336
WIRE -16 384 -16 336
WIRE -16 496 -16 464
FLAG -16 -976 0
FLAG 720 -128 out
IOPIN 720 -128 Out
FLAG 608 0 0
FLAG -16 496 0
FLAG -832 -384 0
FLAG -768 0 0
FLAG -1040 -96 0
FLAG -336 -304 0
FLAG -672 -672 0
FLAG -416 -1024 0
FLAG -512 -592 0
SYMBOL LM8261 112 160 R0
SYMATTR InstName U1
SYMBOL nmos 240 80 R0
SYMATTR InstName M1
SYMATTR Value STW11NM80
SYMBOL res 272 224 R0
SYMATTR InstName R3
SYMATTR Value 75
SYMBOL res 272 -368 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL voltage -16 -1088 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 150
SYMBOL voltage -208 -96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL res 96 -32 R0
SYMATTR InstName R1
SYMATTR Value 1
SYMBOL cap 592 -80 R0
SYMATTR InstName C1
SYMATTR Value 50p
SYMBOL res -560 192 R0
SYMATTR InstName R4
SYMATTR Value 2740
SYMBOL voltage -16 368 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value -150
SYMBOL res -560 -400 R0
SYMATTR InstName R5
SYMATTR Value 3653
SYMBOL LM8261 -768 -192 R0
SYMATTR InstName U3
SYMBOL voltage -768 -416 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value -12
SYMBOL voltage -768 -112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value -12
SYMBOL voltage -1040 -208 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value SINE(0 1 1k)
SYMBOL pmos -592 -176 M180
SYMATTR InstName M2
SYMATTR Value IRF9640
SYMBOL voltage -336 -416 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value 1.5
SYMBOL res -608 -304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value .1
SYMBOL res -560 -80 R0
SYMATTR InstName R6
SYMATTR Value .1
SYMBOL res -304 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value .1
SYMBOL NE5532 -512 -832 R0
SYMATTR InstName U2
SYMBOL res -688 -992 R0
SYMATTR InstName R9
SYMATTR Value 100k
SYMBOL res -688 -800 R0
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL voltage -512 -720 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value -12
SYMBOL voltage -512 -1024 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value -12
TEXT -728 -560 Left 2 !.tran 3m
TEXT 224 400 Left 2 ;10k Rout -> max 30mA, average 15mA
TEXT 240 432 Left 2 ;5k Rout -> max 60mA, average 30mA
TEXT 176 464 Left 2 ;set average control voltage = 1V to keep average power < 100mW
TEXT -880 384 Left 2 ;10k Rout -> max 600uA, average 300uA
TEXT -864 416 Left 2 ;5k Rout -> max 1200uA, average 600uA
TEXT -920 512 Left 2 ;LM8261 bias current is ~1uA, and I have 2x LM8261!
TEXT -976 552 Left 2 ;So I need 1 LSB > 2uA, i.e., average current is > 128*2uA = 256uA
TEXT -784 592 Left 2 ;so set current mirror to 50x
